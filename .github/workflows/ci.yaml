name: ğŸš€ Spring Boot CI - Authenmedaf

# ğŸ‘‰ Le workflow sâ€™exÃ©cute uniquement lors dâ€™un push sur la branche "main"
on:
  push:
    branches:
      - main

jobs:
  build:
    name: ğŸ§± Build et Test du projet
    runs-on: windows-latest

    steps:
      # ğŸª„ Ã‰tape 1 : RÃ©cupÃ©rer le code source du dÃ©pÃ´t
      - name: ğŸ“¦ Checkout du dÃ©pÃ´t
        uses: actions/checkout@v4

      # â˜• Ã‰tape 2 : Installer Java 17
      - name: âš™ï¸ Configurer Java 17 (Temurin)
        uses: actions/setup-java@v4
        with:
          distribution: "temurin"
          java-version: "17"
          cache: "maven"

      # ğŸ—ï¸ Ã‰tape 3 : Construire lâ€™application avec Maven
      - name: ğŸ§° Build du projet avec Maven
        run: mvn -B clean package --file pom.xml

      # ğŸ§ª Ã‰tape 4 : Lancer les tests unitaires
      - name: ğŸ§  ExÃ©cution des tests unitaires
        run: mvn test

      # ğŸ“¤ Ã‰tape 5 : Sauvegarder le fichier JAR gÃ©nÃ©rÃ©
      - name: ğŸ’¾ Sauvegarder le JAR gÃ©nÃ©rÃ©
        uses: actions/upload-artifact@v4
        with:
          name: authenmedaf-jar
          path: target/*.jar
